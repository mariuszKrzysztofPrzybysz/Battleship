@model IEnumerable<BattleShip.Repository.ViewModels.PlayerBattlesViewModel>

@{
    ViewBag.Title = "Battles";
    Layout = "~/Views/Shared/_PlayerLayout.cshtml";
}

<h2>Battles</h2>

<table class="table table-striped table-hover">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Player)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Opponent)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.StartUtcDateTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Duration)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Winner)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Player)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Opponent)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.StartUtcDateTime)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Duration)
            </td>
            <td>
                @{
                    if (item.Winner == string.Empty)
                    {
                        <span class="label label-info">Pending</span>
                    }
                    else if (item.Winner == User.Identity.Name)
                    {
                        <span class="label label-success">@User.Identity.Name</span>
                    }
                    else
                    {
                        <span class="label label-warning">@User.Identity.Name</span>
                    }
                }
            </td>
            <td>
                @{
                    if (item.Winner == string.Empty)
                    {
                        @Html.ActionLink("Resume battle", "Play", "Battle", new {id = item.BattleId}, new {@class = "btn btn-xs btn-info"})
                    }
                }
            </td>
        </tr>
    }
</table>